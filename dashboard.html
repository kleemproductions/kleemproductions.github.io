<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kleem Productions Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* General dark mode overrides for consistency with the main app */
        body.dark .bg-white { background-color: #000; }
        body.dark .text-stone-900 { color: white; }
        body.dark .text-stone-600 { color: #ccc; }
        body.dark .bg-stone-100 { background-color: #111; }
        body.dark .hover\:bg-stone-200:hover { background-color: #333; }
        body.dark .text-amber-700 { color: #facc15; }
        body.dark .hover\:text-amber-700:hover { color: #facc15; }
        body.dark .text-stone-800 { color: #ccc; }
        body.dark .text-stone-500 { color: #aaa; }
        body.dark .border-stone-300 { border-color: #333; }
        body.dark .bg-stone-200 { background-color: #222; }
        body.dark .text-stone-700 { color: white; }
        body.dark .hover\:bg-amber-700:hover { background-color: #facc15; }
        body.dark .hover\:text-white:hover { color: black; }
        body.dark .hover\:bg-amber-700.hover\:text-white { color: black; }
        body.dark .bg-gray-800 { background-color: #1a202c; }
        body.dark .text-yellow-400 { color: #facc15; }
        body.dark .hover\:bg-yellow-400:hover { background-color: #eab308; }
        body.dark .bg-gray-900 { background-color: #111; }
        body.dark .text-gray-300 { color: #d1d5db; }
        body.dark .text-gray-500 { color: #6b7280; }
        body.dark .border-gray-800 { border-color: #1f2937; }
        body.dark .bg-white\/20 { background-color: rgba(255, 255, 255, 0.2); }
        body.dark .bg-black { background-color: black; }
        body.dark input, body.dark textarea, body.dark select {
            background-color: #333;
            border-color: #444;
            color: #d1d5db;
        }

        /* Specific dashboard styles */
        .modal {
            display: none;
        }
        .modal.open {
            display: flex;
        }
    </style>
</head>
<body class="bg-stone-100 text-stone-900 transition-colors duration-300" style="font-family: 'Lato', sans-serif;">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div id="sidebar" class="w-64 bg-white shadow-lg flex flex-col transition-colors duration-300 dark:bg-black">
            <div class="p-4 border-b border-stone-200 dark:border-gray-800 flex items-center justify-between">
                <h2 class="text-2xl font-bold text-stone-900 dark:text-white" style="font-family: 'Cinzel', serif;">Dashboard</h2>
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-stone-200 dark:hover:bg-gray-800 transition-colors">
                    <span id="theme-icon" class="material-icons text-xl text-stone-700 dark:text-white">dark_mode</span>
                </button>
            </div>
            <nav class="flex-grow p-4 space-y-2">
                <a href="#/news" class="block p-3 rounded-lg hover:bg-stone-200 dark:hover:bg-gray-800 transition-colors flex items-center space-x-2 text-stone-900 dark:text-white">
                    <span class="material-icons text-2xl text-amber-700 dark:text-yellow-400">article</span>
                    <span class="font-bold">News Articles</span>
                </a>
                <a href="#/products" class="block p-3 rounded-lg hover:bg-stone-200 dark:hover:bg-gray-800 transition-colors flex items-center space-x-2 text-stone-900 dark:text-white">
                    <span class="material-icons text-2xl text-amber-700 dark:text-yellow-400">shopping_bag</span>
                    <span class="font-bold">Shop Products</span>
                </a>
            </nav>
        </div>

        <!-- Main Content Area -->
        <div class="flex-grow overflow-auto">
            <div id="content" class="p-8">
                <!-- Content will be dynamically loaded here -->
                <div class="text-center p-20 text-stone-600 dark:text-gray-500">
                    <span class="material-icons text-9xl mb-4">dashboard</span>
                    <h1 class="text-3xl font-bold text-stone-900 dark:text-white" style="font-family: 'Cinzel', serif;">Welcome to the Dashboard</h1>
                    <p class="text-lg">Select an option from the sidebar to begin.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Forms -->
    <div id="modal" class="modal fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div id="modal-content" class="bg-white dark:bg-stone-900 p-8 rounded-lg shadow-2xl w-full max-w-2xl transform scale-95 transition-transform">
            <div class="flex justify-between items-center mb-6 border-b pb-4 border-stone-200 dark:border-gray-700">
                <h3 id="modal-title" class="text-2xl font-bold text-stone-900 dark:text-white" style="font-family: 'Cinzel', serif;"></h3>
                <button id="modal-close" class="p-2 rounded-full text-stone-700 dark:text-white hover:bg-stone-200 dark:hover:bg-gray-700 transition">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <form id="item-form" class="space-y-4">
                <!-- Form fields will be injected here -->
            </form>
        </div>
    </div>

    <script>
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const body = document.body;
        const contentDiv = document.getElementById('content');
        const modal = document.getElementById('modal');
        const modalClose = document.getElementById('modal-close');
        const modalTitle = document.getElementById('modal-title');
        const itemForm = document.getElementById('item-form');

        // Data arrays to simulate JSON files
        let allNews = [
            {
                "img": "https://www.koimoi.com/wp-content/new-galleries/2025/08/mahavatar-narsimha-box-office-1.jpg",
                "category": "News",
                "date": "August 05, 2025",
                "title": "Crafting the Roar of Narsimha",
                "snippet": "A deep dive into the sound design that brought the divine avatar to life, featuring interviews with our award-winning audio team.",
                "link": "https://example.com/news/crafting-the-roar"
            },
            {
                "img": "https://www.deccanchronicle.com/h-upload/2025/08/09/1946365-mahavatar-narsimha-creates-a-new-record.webp",
                "category": "Announcements",
                "date": "July 28, 2025",
                "title": "Mahavatar Parshuram Officially in Pre-Production",
                "snippet": "The next chapter begins! Kleem Productions is thrilled to announce that pre-production for the highly anticipated Mahavatar Parshuram has commenced.",
                "link": "https://example.com/news/parshuram-pre-production"
            },
            {
                "img": "https://www.koimoi.com/wp-content/new-galleries/2025/08/mahavatar-narsimha-box-office-1.jpg",
                "category": "News",
                "date": "July 15, 2025",
                "title": "The VFX of the Man-Lion: A Technological Leap",
                "snippet": "Explore the groundbreaking visual effects techniques used to create the stunning, hyper-realistic form of Lord Narsimha.",
                "link": "https://example.com/news/vfx-technology"
            },
            {
                "img": "https://www.deccanchronicle.com/h-upload/2025/08/09/1946365-mahavatar-narsimha-creates-a-new-record.webp",
                "category": "News",
                "date": "June 30, 2025",
                "title": "Fan Art Showcase: The Best of the Best",
                "snippet": "We were blown away by the incredible talent of our community. Check out our favorite fan art submissions for Mahavatar Narsimha!",
                "link": "https://example.com/news/fan-art-showcase"
            },
            {
                "img": "https://etvbharatimages.akamaized.net/etvbharat/prod-images/10-08-2025/1200-675-24778270-666-24778270-1754803276349.jpg??imwidth=1200",
                "category": "News",
                "date": "August 17, 2025",
                "title": "Mahavatar Narsimha Smashes Box Office Records",
                "snippet": "The epic film has crossed major milestones in its opening weekend, setting new benchmarks for animated features in the industry.",
                "link": "https://example.com/news/box-office-records"
            },
            {
                "img": "https://placehold.co/600x400/111/FFF?text=Premiere+Event",
                "category": "Events",
                "date": "August 14, 2025",
                "title": "Red Carpet Premiere Night",
                "snippet": "Join us for the star-studded premiere of Mahavatar Narsimha. An unforgettable night of glamour and celebration.",
                "link": "https://example.com/events/premiere-night"
            }
        ];

        let allProducts = [
            {
                "name": "Narsimha Graphic Tee",
                "price": "$29.99",
                "img": "https://placehold.co/400x400/333/FFF?text=Merch+1",
                "link": "https://example.com/shop/tee"
            },
            {
                "name": "Official Movie Poster",
                "price": "$19.99",
                "img": "https://placehold.co/400x400/444/FFF?text=Merch+2",
                "link": "https://example.com/shop/poster"
            },
            {
                "name": "Prahlad Funko Pop",
                "price": "$15.99",
                "img": "https://placehold.co/400x400/555/FFF?text=Merch+3",
                "link": "https://example.com/shop/funko"
            },
            {
                "name": "Mahavatar Universe Mug",
                "price": "$12.99",
                "img": "https://placehold.co/400x400/666/FFF?text=Merch+4",
                "link": "https://example.com/shop/mug"
            },
            {
                "name": "Hiranyakashipu Action Figure",
                "price": "$34.99",
                "img": "https://placehold.co/400x400/777/FFF?text=Merch+5",
                "link": "https://example.com/shop/action-figure"
            },
            {
                "name": "The Art of Mahavatar Narsimha",
                "price": "$49.99",
                "img": "https://placehold.co/400x400/888/FFF?text=Merch+6",
                "link": "https://example.com/shop/art-book"
            },
            {
                "name": "Original Motion Picture Soundtrack Vinyl",
                "price": "$39.99",
                "img": "https://placehold.co/400x400/999/FFF?text=Merch+7",
                "link": "https://example.com/shop/vinyl"
            },
            {
                "name": "Kleem Productions Hoodie",
                "price": "$59.99",
                "img": "https://placehold.co/400x400/AAA/FFF?text=Merch+8",
                "link": "https://example.com/shop/hoodie"
            }
        ];

        let currentEditingItemIndex = null;
        let currentItemType = null;

        // Theme toggle logic
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            body.classList.add(savedTheme);
            if (savedTheme === 'dark') {
                themeIcon.textContent = 'light_mode';
            }
        } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            body.classList.add('dark');
            themeIcon.textContent = 'light_mode';
        }

        themeToggle.addEventListener('click', () => {
            if (body.classList.contains('dark')) {
                body.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                themeIcon.textContent = 'dark_mode';
            } else {
                body.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                themeIcon.textContent = 'light_mode';
            }
        });

        // Router and UI rendering logic
        const router = () => {
            const hash = window.location.hash.slice(1);
            contentDiv.innerHTML = '';
            if (hash === '/news') {
                renderNewsDashboard();
            } else if (hash === '/products') {
                renderProductsDashboard();
            } else {
                contentDiv.innerHTML = `
                    <div class="text-center p-20 text-stone-600 dark:text-gray-500">
                        <span class="material-icons text-9xl mb-4">dashboard</span>
                        <h1 class="text-3xl font-bold text-stone-900 dark:text-white" style="font-family: 'Cinzel', serif;">Welcome to the Dashboard</h1>
                        <p class="text-lg">Select an option from the sidebar to begin.</p>
                    </div>
                `;
            }
        };

        const renderNewsDashboard = () => {
            contentDiv.innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-4xl font-bold text-amber-700 dark:text-yellow-400" style="font-family: 'Cinzel', serif;">News Articles</h1>
                    <button id="add-news-btn" class="bg-amber-700 text-white px-4 py-2 rounded-lg font-bold flex items-center space-x-2 hover:bg-amber-800 transition dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-500">
                        <span class="material-icons">add</span>
                        <span>Add New</span>
                    </button>
                </div>
                <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-lg">
                    <h2 class="text-xl font-bold text-stone-900 dark:text-white">Articles List</h2>
                    <ul id="news-list" class="mt-4 space-y-4"></ul>
                </div>
            `;
            document.getElementById('add-news-btn').addEventListener('click', () => openModal('news'));
            displayNews();
        };

        const renderProductsDashboard = () => {
            contentDiv.innerHTML = `
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-4xl font-bold text-amber-700 dark:text-yellow-400" style="font-family: 'Cinzel', serif;">Shop Products</h1>
                    <button id="add-product-btn" class="bg-amber-700 text-white px-4 py-2 rounded-lg font-bold flex items-center space-x-2 hover:bg-amber-800 transition dark:bg-yellow-400 dark:text-black dark:hover:bg-yellow-500">
                        <span class="material-icons">add</span>
                        <span>Add New</span>
                    </button>
                </div>
                <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-lg">
                    <h2 class="text-xl font-bold text-stone-900 dark:text-white">Products List</h2>
                    <div id="products-grid" class="mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
                </div>
            `;
            document.getElementById('add-product-btn').addEventListener('click', () => openModal('products'));
            displayProducts();
        };

        const displayNews = () => {
            const newsList = document.getElementById('news-list');
            if (!newsList) return;
            newsList.innerHTML = '';
            allNews.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'flex justify-between items-center bg-stone-100 dark:bg-gray-800 p-4 rounded-lg shadow-sm';
                li.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <img src="${item.img}" alt="${item.title}" class="w-16 h-16 object-cover rounded-md">
                        <div>
                            <h3 class="font-bold text-lg text-stone-900 dark:text-white">${item.title}</h3>
                            <p class="text-sm text-stone-600 dark:text-gray-400">${item.snippet}</p>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button data-index="${index}" class="edit-btn p-2 rounded-full text-stone-700 dark:text-white hover:bg-amber-700 dark:hover:bg-yellow-400 hover:text-white dark:hover:text-black transition">
                            <span class="material-icons text-xl">edit</span>
                        </button>
                        <button data-index="${index}" class="delete-btn p-2 rounded-full text-stone-700 dark:text-white hover:bg-red-500 hover:text-white transition">
                            <span class="material-icons text-xl">delete</span>
                        </button>
                    </div>
                `;
                newsList.appendChild(li);
            });
            document.querySelectorAll('.edit-btn').forEach(btn => btn.addEventListener('click', (e) => editItem('news', e.currentTarget.dataset.index)));
            document.querySelectorAll('.delete-btn').forEach(btn => btn.addEventListener('click', (e) => deleteItem('news', e.currentTarget.dataset.index)));
        };

        const displayProducts = () => {
            const productsGrid = document.getElementById('products-grid');
            if (!productsGrid) return;
            productsGrid.innerHTML = '';
            allProducts.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'bg-white dark:bg-gray-900 p-4 rounded-lg shadow-sm';
                div.innerHTML = `
                    <img src="${item.img}" alt="${item.name}" class="w-full h-40 object-cover rounded-md mb-4">
                    <h3 class="font-bold text-lg text-stone-900 dark:text-white">${item.name}</h3>
                    <p class="text-amber-700 dark:text-yellow-400 font-semibold">${item.price}</p>
                    <div class="flex justify-end space-x-2 mt-4">
                        <button data-index="${index}" class="edit-btn p-2 rounded-full text-stone-700 dark:text-white hover:bg-amber-700 dark:hover:bg-yellow-400 hover:text-white dark:hover:text-black transition">
                            <span class="material-icons text-xl">edit</span>
                        </button>
                        <button data-index="${index}" class="delete-btn p-2 rounded-full text-stone-700 dark:text-white hover:bg-red-500 hover:text-white transition">
                            <span class="material-icons text-xl">delete</span>
                        </button>
                    </div>
                `;
                productsGrid.appendChild(div);
            });
            document.querySelectorAll('.edit-btn').forEach(btn => btn.addEventListener('click', (e) => editItem('products', e.currentTarget.dataset.index)));
            document.querySelectorAll('.delete-btn').forEach(btn => btn.addEventListener('click', (e) => deleteItem('products', e.currentTarget.dataset.index)));
        };
        
        const openModal = (type, index = null) => {
            currentItemType = type;
            currentEditingItemIndex = index;
            itemForm.reset();
            let formHtml = '';
            
            let currentItem;
            if (index !== null) {
                if (type === 'news') {
                    currentItem = allNews[index];
                } else {
                    currentItem = allProducts[index];
                }
            }

            if (type === 'news') {
                modalTitle.textContent = index !== null ? 'Edit News Article' : 'Add News Article';
                formHtml = `
                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Title</label>
                    <input type="text" name="title" value="${currentItem?.title || ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">
                    
                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Snippet</label>
                    <textarea name="snippet" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">${currentItem?.snippet || ''}</textarea>

                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Image URL</label>
                    <input type="text" name="img" value="${currentItem?.img || ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">
                    
                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Category</label>
                    <select name="category" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">
                        <option value="News" ${currentItem?.category === 'News' ? 'selected' : ''}>News</option>
                        <option value="Announcements" ${currentItem?.category === 'Announcements' ? 'selected' : ''}>Announcements</option>
                        <option value="Events" ${currentItem?.category === 'Events' ? 'selected' : ''}>Events</option>
                    </select>

                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Date</label>
                    <input type="date" name="date" value="${currentItem?.date ? new Date(currentItem.date).toISOString().split('T')[0] : ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">

                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Link</label>
                    <input type="text" name="link" value="${currentItem?.link || ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">
                `;
            } else if (type === 'products') {
                modalTitle.textContent = index !== null ? 'Edit Product' : 'Add Product';
                formHtml = `
                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Product Name</label>
                    <input type="text" name="name" value="${currentItem?.name || ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">
                    
                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Price</label>
                    <input type="text" name="price" value="${currentItem?.price || ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">
                    
                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Image URL</label>
                    <input type="text" name="img" value="${currentItem?.img || ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">

                    <label class="block text-sm font-bold text-stone-600 dark:text-gray-400">Link</label>
                    <input type="text" name="link" value="${currentItem?.link || ''}" class="w-full p-2 border rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700 text-stone-900 dark:text-white">
                `;
            }

            formHtml += `
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" id="modal-cancel" class="px-6 py-2 rounded-full font-bold bg-stone-200 dark:bg-gray-800 text-stone-900 dark:text-white hover:bg-stone-300 dark:hover:bg-gray-700 transition">Cancel</button>
                    <button type="submit" class="px-6 py-2 rounded-full font-bold bg-amber-700 dark:bg-yellow-400 text-white dark:text-black hover:bg-amber-800 dark:hover:bg-yellow-500 transition">${index !== null ? 'Save Changes' : 'Add Item'}</button>
                </div>
            `;
            itemForm.innerHTML = formHtml;
            document.getElementById('modal-cancel').addEventListener('click', closeModal);
            itemForm.addEventListener('submit', handleFormSubmit);

            modal.classList.add('open');
        };

        const closeModal = () => {
            modal.classList.remove('open');
        };

        const handleFormSubmit = (e) => {
            e.preventDefault();
            const formData = new FormData(itemForm);
            const data = Object.fromEntries(formData.entries());
            let items = currentItemType === 'news' ? allNews : allProducts;

            if (currentEditingItemIndex !== null) {
                // Update existing item
                items[currentEditingItemIndex] = data;
            } else {
                // Add new item
                items.push(data);
            }
            
            if (currentItemType === 'news') {
                allNews = items;
                displayNews();
            } else {
                allProducts = items;
                displayProducts();
            }

            closeModal();
        };

        const editItem = (type, index) => {
            openModal(type, index);
        };

        const deleteItem = (type, index) => {
            if (confirm('Are you sure you want to delete this item?')) {
                let items = currentItemType === 'news' ? allNews : allProducts;
                items.splice(index, 1);
                if (type === 'news') {
                    allNews = items;
                    displayNews();
                } else {
                    allProducts = items;
                    displayProducts();
                }
            }
        };

        window.addEventListener('hashchange', router);
        window.addEventListener('load', () => {
            router();
        });
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });
        modalClose.addEventListener('click', closeModal);
    </script>
</body>
</html>
